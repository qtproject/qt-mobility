<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- organizerengines.qdoc -->
  <title>Qt 1.1: Qt Organizer Manager Engines</title>
  <link rel="stylesheet" type="text/css" href="style/style.css"
 />  <!--[if IE]>
<meta name="MSSmartTagsPreventParsing" content="true">
<meta http-equiv="imagetoolbar" content="no">
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" href="style/style_ie6.css">
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="style/style_ie7.css">
<![endif]-->
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="style/style_ie8.css">
<![endif]-->
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
 <script src="./scripts/superfish.js" type="text/javascript"></script>
 <script src="./scripts/narrow.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="style/superfish.css" />  <link rel="stylesheet" type="text/css" href="style/narrow.css" /></head>
<body class="" onload="CheckEmptyAndLoadList();">
 <div class="header" id="qtdocheader">
    <div id="nav-logo">
      <a href="index.html">Home</a></div>
    <a href="index.html" class="qtref"><span>Qt Mobility Reference Documentation</span></a>
    <div id="nav-topright">
      <ul>
        <li class="nav-topright-home"><a href="http://qt.nokia.com/">Qt HOME</a></li>
        <li class="nav-topright-dev"><a href="http://qt.nokia.com/developer">DEV</a></li>
        <li class="nav-topright-labs"><a href="http://labs.qt.nokia.com/blogs/">LABS</a></li>
        <li class="nav-topright-doc nav-topright-doc-active"><a href="http://doc.qt.nokia.com/">
          DOC</a></li>
        <li class="nav-topright-blog"><a href="http://blog.qt.nokia.com/">BLOG</a></li>
        <li class="nav-topright-shop"><a title="SHOP" href="http://shop.qt.nokia.com">SHOP</a></li>
      </ul>
    </div>
    <div id="shortCut">
      <ul>
        <li class="shortCut-topleft-inactive"><span><a href="index.html">Mobility 1.1</a></span></li>
        <li class="shortCut-topleft-active"><a href="http://qt.nokia.com/doc/">ALL Qt VERSIONS        </a></li>
      </ul>
    </div>
  </div>
  <div class="wrapper">
    <div class="hd">
      <span></span>
    </div>
    <div class="bd group">
      <div class="sidebar">
        <div class="searchlabel">
          Search index:</div>
        <div class="search">
          <form id="qtdocsearch" action="">
            <fieldset>
              <input type="text" name="searchstring" id="pageType" value="" />
            </fieldset>
          </form>
        </div>
        <div class="box first bottombar" id="lookup">
          <h2><span></span>
            API Lookup</h2>
          <div  id="list001" class="list">
          <ul id="ul001" >
              <li class="defaultLink"><a href="classes.html">Class index</a></li>
              <li class="defaultLink"><a href="functions.html">Function index</a></li>
              <li class="defaultLink"><a href="modules.html">Modules</a></li>
              <li class="defaultLink"><a href="namespaces.html">Namespaces</a></li>
              <li class="defaultLink"><a href="qtglobal.html">Global stuff</a></li>
              <li class="defaultLink"><a href="qdeclarativeelements.html">QML elements</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="topics">
          <h2><span></span>
            Qt Topics</h2>
          <div id="list002" class="list">
            <ul id="ul002" >
              <li class="defaultLink"><a href="qt-basic-concepts.html">Basic Qt architecture</a></li>
              <li class="defaultLink"><a href="declarativeui.html">Device UI's &amp; Qt Quick</a></li>
              <li class="defaultLink"><a href="qt-gui-concepts.html">Desktop UI components</a></li>
              <li class="defaultLink"><a href="platform-specific.html">Platform-specific info</a></li>
            </ul>  
          </div>
        </div>
        <div class="box" id="examples">
          <h2><span></span>
            Examples</h2>
          <div id="list003" class="list">
        <ul id="ul003">
              <li class="defaultLink"><a href="all-examples.html">Examples</a></li>
              <li class="defaultLink"><a href="tutorials.html">Tutorials</a></li>
              <li class="defaultLink"><a href="demos.html">Demos</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html">QML Examples</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html#Demos">QML Demos</a></li>
            </ul> 
          </div>
        </div>
      </div>
      <div class="wrap">
        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html">Home</a></li>
              <!--  Bread crumbs goes here -->
              <li>Qt Organizer Manager Engines</li>            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
              <li id="print" class="t_button"><a href="javascript:this.print();">
                <span>Print</span></a></li>
            </ul>
          </div>
        </div>
        <div class="content">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#introduction">Introduction</a></li>
<li class="level1"><a href="#information-for-clients">Information For Clients</a></li>
<li class="level2"><a href="#where-is-the-data-stored">Where Is The Data Stored?</a></li>
<li class="level2"><a href="#schema-differences">Schema Differences</a></li>
<li class="level2"><a href="#provided-engines">Provided Engines</a></li>
<li class="level3"><a href="#in-memory-example-engine">In-Memory Example Engine</a></li>
<li class="level3"><a href="#symbian-engine">Symbian Engine</a></li>
<li class="level3"><a href="#maemo-5-fremantle-engine">Maemo 5 (Fremantle) Engine</a></li>
<li class="level1"><a href="#information-for-engine-implementors">Information For Engine Implementors</a></li>
<li class="level2"><a href="#which-functions-do-i-need-to-implement">Which Functions Do I Need To Implement</a></li>
<li class="level3"><a href="#mandatory-functions">Mandatory Functions</a></li>
<li class="level3"><a href="#optional-functionality">Optional Functionality</a></li>
<li class="level3"><a href="#optional-implementation">Optional Implementation</a></li>
<li class="level2"><a href="#which-signals-do-i-need-to-emit">Which Signals Do I Need To Emit</a></li>
<li class="level2"><a href="#other-considerations">Other Considerations</a></li>
<li class="level2"><a href="#example-implementation">Example Implementation</a></li>
</ul>
</div>
<h1 class="title">Qt Organizer Manager Engines</h1>
<span class="subtitle"></span>
<div class="descr"/>
<a name="introduction"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h2>Introduction</h2>
<p>The <a href="qorganizeritemmanager.html">QOrganizerItemManager</a> interface provided to clients to allow access to organizer information depends on an implementation of <a href="qorganizeritemmanagerengine.html">QOrganizerItemManagerEngine</a> existing. This engine provides the methods which are called by the manager. An engine is identified by its URI, which is the name reported to clients through the <a href="qorganizeritemmanager.html#managerUri">QOrganizerItemManager::managerUri</a>() function. The URI of a manager is built by combining its name, version and relevant construction parameters.</p>
<a name="information-for-clients"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h2>Information For Clients</h2>
<p>While clients never interact directly with instances of <a href="qorganizeritemmanagerengine.html">QOrganizerItemManagerEngine</a>, they may need to be aware of limitations of individual engines, or differences between engines. The API offered through <a href="qorganizeritemmanager.html">QOrganizerItemManager</a> allows clients to retrieve this information for the engine which provides the functionality exposed through a particular <a href="qorganizeritemmanager.html">QOrganizerItemManager</a>.</p>
<a name="where-is-the-data-stored"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h3>Where Is The Data Stored?</h3>
<p>A <a href="qorganizeritemmanagerengine.html">QOrganizerItemManagerEngine</a> may provide an aggregated view of multiple physical datastores, zero or more of which may be remote datastores. Clients of the API are aware only that the data is managed by a <a href="qorganizeritemmanagerengine.html">QOrganizerItemManagerEngine</a> with a particular URI. It is possible that multiple different engines will have overlap in the datastores which they aggregate, and in that case the way in which those engines were implemented will determine whether operations are thread-safe or not.</p>
<p>Since the data may physically be stored in a remote datastore, any operations may be dominated by the return-trip-time of communications with the remote datastore. As such, it is recommended that clients use the asynchronous client API to access organizer information from any <a href="qorganizeritemmanager.html">QOrganizerItemManager</a>.</p>
<a name="schema-differences"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h3>Schema Differences</h3>
<p>Each engine may support a different schema. All engines should attempt to support the default schema, described in the <a href="organizerschema.html">default schema</a> documentation, however clients should never assume that any engine does support the default schema fully.</p>
<p>Clients are able to retrieve the schema supported by a particular engine at run-time by calling <a href="qorganizeritemmanager.html#detailDefinitions">QOrganizerItemManager::detailDefinitions</a>(). Some engines support different detail definitions (that is, a different schema) for different types of organizer items (events, todos, journals, notes and so forth). Clients can retrieve the organizer item types supported by an engine by calling <a href="qorganizeritemmanager.html#supportedItemTypes">QOrganizerItemManager::supportedItemTypes</a>().</p>
<a name="provided-engines"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h3>Provided Engines</h3>
<p>The Organizer module of the Qt Mobility project includes several backends already, some of which are designed to interface with the default calendar on their particular platform.</p>
<a name="in-memory-example-engine"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h4>In-Memory Example Engine</h4>
<p>The in-memory engine identifies itself as the &quot;memory&quot; engine. It is available on all platforms which are supported by the Qt Mobility project.</p>
<p>The in-memory engine supports the default schema, and provides almost all functionality available through the Qt Mobility Organizer API; however, all data is stored in-memory and is not persisted in any way.</p>
<a name="symbian-engine"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h4>Symbian Engine</h4>
<p>The Symbian engine identifies itself as the &quot;symbian&quot; engine, and is only available on the Symbian S60 3.1, S60 3.2, S60 5.0 and Symbian^3 platforms.</p>
<p>The Symbian engine supports a modified version of the default schema. The schema supported by the Symbian engine depends on which version of the platform is being used.</p>
<p>The Symbian engine allows clients to use both the asynchronous and synchronous interfaces, and persists all saved data to the system calendar.</p>
<a name="maemo-5-fremantle-engine"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h4>Maemo 5 (Fremantle) Engine</h4>
<p>The Maemo 5 (Fremantle) engine identifies itself as the &quot;maemo5&quot; engine, but is only available on the Maemo 5 (Fremantle) platform which has the correct libraries installed (including calendar-backend).</p>
<p>The Maemo 5 (Fremantle) engine supports a modified version of the default schema, and persists all saved information to the system calendar.</p>
<a name="information-for-engine-implementors"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h2>Information For Engine Implementors</h2>
<p>Some developers may wish to provide implementations of <a href="qorganizeritemmanagerengine.html">QOrganizerItemManagerEngine</a> for use by clients. The engine that they provide may aggregate multiple datastores, or access a remote datastore, or provide some other functionality to clients. An engine is distributed as a Qt Plugin, and will be detected automatically by the plugin loading code in the <a href="qorganizeritemmanager.html">QOrganizerItemManager</a>, so long as the plugin is located in the correct path ($QT_PLUGINS_DIR/organizer/).</p>
<a name="which-functions-do-i-need-to-implement"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h3>Which Functions Do I Need To Implement</h3>
<p>Different engines provide different functionality and support different features. Depending on the feature set of the engine, it will need to implement a particular subset of the API. The default implementation for most functions will set the error to <tt>QOrganizerItemManager::NotSupportedError</tt> and return the value which indicates that an error has occurred.</p>
<a name="mandatory-functions"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h4>Mandatory Functions</h4>
<p>All engines must implement the following functions:</p>
<ul>
<li><a href="qorganizeritemmanagerengine.html#managerName">QOrganizerItemManagerEngine::managerName</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#managerVersion">QOrganizerItemManagerEngine::managerVersion</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#supportedItemTypes">QOrganizerItemManagerEngine::supportedItemTypes</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#supportedDataTypes">QOrganizerItemManagerEngine::supportedDataTypes</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#hasFeature">QOrganizerItemManagerEngine::hasFeature</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#detailDefinitions">QOrganizerItemManagerEngine::detailDefinitions</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#itemIds">QOrganizerItemManagerEngine::itemIds</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#items">QOrganizerItemManagerEngine::items</a>()</li>
</ul>
<p>Every engine implementation must also come with an implementation of <a href="qorganizeritemmanagerenginefactory.html">QOrganizerItemManagerEngineFactory</a> for that engine.</p>
<p>Note that you do not need to implement filtering and sorting natively in an engine; the default implementation offers the following static functions to perform filtering and sorting respectively, in memory:</p>
<ul>
<li><a href="qorganizeritemmanagerengine.html#testFilter">QOrganizerItemManagerEngine::testFilter</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#sortItems">QOrganizerItemManagerEngine::sortItems</a>()</li>
</ul>
<p>However, engine implementors should be aware that the default implementation is naive and will have greatly reduced performance compared to a native implementation (e.g&#x2e;, SQL queries, if the calendar or personal data exposed by the engine implementation is stored in an SQL database).</p>
<p>Similarly, any <a href="qorganizeritemfetchhint.html">QOrganizerItemFetchHint</a> parameter may be ignored by an engine implementation, but if it does so it must return all information available for the item.</p>
<p>All engines must also implement the following functions to implement asynchronous requests:</p>
<ul>
<li><a href="qorganizeritemmanagerengine.html#requestDestroyed">QOrganizerItemManagerEngine::requestDestroyed</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#startRequest">QOrganizerItemManagerEngine::startRequest</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#cancelRequest">QOrganizerItemManagerEngine::cancelRequest</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#waitForRequestFinished">QOrganizerItemManagerEngine::waitForRequestFinished</a>()</li>
</ul>
<p>If the engine does not support asynchronous requests, it should always return false in the last three of those functions, and do nothing in the first. If the engine does support asynchronous requests, it must ensure that all information required to perform the request is saved in the engine within <a href="qorganizeritemmanagerengine.html#startRequest">QOrganizerItemManagerEngine::startRequest</a>(), as the client owns the request object and may delete it at any time. In general, engine implementors should be aware of this ownership semantic, and never attempt an unsafe operation on a request pointer.</p>
<p>It is recommended that all engine implementations support asynchronous requests, even if they use a &quot;dummy&quot; implementation which services the request synchronously during startRequest, and then emit the appropriate signals from the request via a zero-millisecond timeout timer.</p>
<a name="optional-functionality"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h4>Optional Functionality</h4>
<p>The rest of the virtual functions are optional, and should be implemented only if the engine supports the operations.</p>
<p>If the engine can be constructed with different parameters, which affects the operation of the engine (for example, a parameter might define which file to read schedule or calendar information from, or it might be an access token to prove that the client has the access rights to read organizer information from the engine, etc), it must report which parameters it was constructed with via the</p>
<ul>
<li><a href="qorganizeritemmanagerengine.html#managerParameters">QOrganizerItemManagerEngine::managerParameters</a>()</li>
</ul>
<p>function.</p>
<p>If the engine supports native filtering of any kind, it must report to clients which filters are supported natively by implementing:</p>
<ul>
<li><a href="qorganizeritemmanagerengine.html#isFilterSupported">QOrganizerItemManagerEngine::isFilterSupported</a>()</li>
</ul>
<p>If the engine supports saving or removing organizer item information, as well as retrieval, it must implement:</p>
<ul>
<li><a href="qorganizeritemmanagerengine.html#saveItems">QOrganizerItemManagerEngine::saveItems</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#removeItems">QOrganizerItemManagerEngine::removeItems</a>()</li>
</ul>
<p>It may also choose to implement the &quot;single item&quot; functions:</p>
<ul>
<li><a href="qorganizeritemmanagerengine.html#saveItem">QOrganizerItemManagerEngine::saveItem</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#removeItem">QOrganizerItemManagerEngine::removeItem</a>()</li>
</ul>
<p>If it does not, the default implementation of those functions will use the batch (plural) versions of those functions to implement the required behavior.</p>
<p>If the engine supports modification of its schema (that is, extension of its definitions at run-time), it must report that it supports the <tt>QOrganizerItemManager::MutableDefinitions</tt> feature via <a href="qorganizeritemmanagerengine.html#hasFeature">QOrganizerItemManagerEngine::hasFeature</a>(), and must also implement:</p>
<ul>
<li><a href="qorganizeritemmanagerengine.html#saveDetailDefinition">QOrganizerItemManagerEngine::saveDetailDefinition</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#removeDetailDefinition">QOrganizerItemManagerEngine::removeDetailDefinition</a>()</li>
</ul>
<a name="optional-implementation"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h4>Optional Implementation</h4>
<p>Apart from areas of functionality which may be optionally implemented by the engine or not, the default implementation provides several functions which operate in a naive, in-memory manner. An engine implementation can override this default implementation with its own, if it wishes, in order to obtain performance gains, or to more accurately implement the function.</p>
<p>As previously mentioned it may implement its own sorting or filtering, in functions such as <a href="qorganizeritemmanagerengine.html#items">QOrganizerItemManagerEngine::items</a>(). An engine may also implement:</p>
<ul>
<li><a href="qorganizeritemmanagerengine.html#validateItem">QOrganizerItemManagerEngine::validateItem</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#validateDefinition">QOrganizerItemManagerEngine::validateDefinition</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#compatibleItem">QOrganizerItemManagerEngine::compatibleItem</a>()</li>
</ul>
<a name="which-signals-do-i-need-to-emit"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h3>Which Signals Do I Need To Emit</h3>
<p>An engine implementation must emit the appropriate signals for the subset of functionality that it supports.</p>
<p>If the engine supports reading or saving items, it must emit the:</p>
<ul>
<li><a href="qorganizeritemmanagerengine.html#itemsAdded">QOrganizerItemManagerEngine::itemsAdded</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#itemsChanged">QOrganizerItemManagerEngine::itemsChanged</a>()</li>
<li><a href="qorganizeritemmanagerengine.html#itemsRemoved">QOrganizerItemManagerEngine::itemsRemoved</a>()</li>
</ul>
<p>signals as appropriate. Alternatively, it can emit the <a href="qorganizeritemmanager.html#dataChanged">QOrganizerItemManager::dataChanged</a>() signal instead.</p>
<a name="other-considerations"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h3>Other Considerations</h3>
<p>There are several other considerations that engine writers must be aware of:</p>
<ul>
<li>Most batch functions take an OPTIONAL error map as a parameter. This parameter may be null, in which case the client is not interested in fine-grained error reporting. Engines must check the pointer before attempting to dereference it.</li>
<li>Every function takes a mandatory <tt>QOrganizerItemManager::Error</tt> pointer argument. This argument is NEVER null, since it exists in the private implementation of <a href="qorganizeritemmanager.html">QOrganizerItemManager</a>. Testing this argument for null is, therefore, superfluous.</li>
<li>The single-item functions for item retrieval, removal and save already have a default implementation which merely wraps the batch retrieval, removal or save function appropriately. This default implementation may not be as performant as a hand-rolled function. Engine implementations MUST implement the batch functions for each area of functionality supported by the engine.</li>
<li>Most clients will prefer to use the asynchronous API to access information from the engine. It is therefore suggested that asynchronous requests be serviced, even if it is implemented in a similar manner to the (provided) memory engine's naive implementation.</li>
</ul>
<a name="example-implementation"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h3>Example Implementation</h3>
<p>There are several implementations of <a href="qorganizeritemmanagerengine.html">QOrganizerItemManagerEngine</a> available in the Qt Mobility source code repository. In particular, the &quot;memory&quot; engine provides an implementation of an in-memory, anonymous datastore which supports almost every feature in the API, and therefore is useful for demonstration purposes. Be aware, however, that the implementation of all functionality in the &quot;memory&quot; engine is naive and not performant, and should not be copied in any real engine implementation (e.g&#x2e;, to perform filtering, it reads all items from the (in-memory) database, and checks one by one for matches; a real engine, on the other hand, might perform a database query to return the results directly, rather than performing n-reads).</p>
</div>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009-2010 Nokia Corporation and/or its subsidiary(-ies)</td>
<td width="20%" align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qt Mobility Project 1.1.0</div></td>
</tr></table></div></address>  <script src="scripts/functions.js" type="text/javascript"></script>
  <!-- <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-4457116-5']);
  _gaq.push(['_trackPageview']);
  (function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script> -->
</body>
</html>
