<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- messaging-installation-on-windows-mobile.qdoc -->
<head>
  <title>Qt Mobility Project 1.1: Messaging Installation On Windows Mobile</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://qt.nokia.com/"><img src="images/qtlogo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">All&nbsp;Functions</font></a>&nbsp;&middot;</td>
<td align="right" valign="top" width="230"><img src="images/codeless.png"  border="0" /></td></tr></table><h1 class="title">Messaging Installation On Windows Mobile<br /><span class="subtitle"></span>
</h1>
<ul><li><a href="#get-qt-mobility-and-qt-packages">Get Qt Mobility and Qt packages</a></li>
<li><a href="#install-pre-requisites">Install pre-requisites</a></li>
<li><a href="#build-qt">Build Qt</a></li>
<li><a href="#build-mobility-messaging">Build Mobility Messaging</a></li>
<li><a href="#deploy">Deploy</a></li>
</ul>
<a name="get-qt-mobility-and-qt-packages"></a>
<h2>Get Qt Mobility and Qt packages</h2>
<p>Get the Qt Mobility Package from <a href="http://get.qt.nokia.com">http://get.qt.nokia.com</a></p>
<p>Get Qt 4.5&#x2e;2 (or newer) Embedded for Windows Mobile package <a href="http://get.qt.nokia.com/qt/source/qt-embedded-wince-opensource-src-4.5.3.zip">download here</a>.</p>
<a name="install-pre-requisites"></a>
<h2>Install pre-requisites</h2>
<p>A perl interpreter such as <a href="http://www.activestate.com/activeperl">ActivePerl</a> must be installed and available in the environment path.</p>
<p>Visual Studio 2009 or newer must be installed.</p>
<p>Windows Mobile 6 Standard SDK (including ActiveSync) must be installed <a href="http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=20686a1d-97a8-4f80-bc6a-ae010e085a6e">download page</a>.</p>
<a name="build-qt"></a>
<h2>Build Qt</h2>
<p>Extract Qt 4.5&#x2e;2 Embedded (or newer) into your Qt directory on windows. e.g&#x2e; c:\Qt\4.5&#x2e;2_winmobile6_standard</p>
<p>Open a Visual Studio cmd shell</p>
<p>Set your PATH to include the Qt binaries</p>
<pre>    set PATH=c:\Qt\4.5.2_winmobile6_standard\bin;%PATH%</pre>
<p>Set the INCLUDE and LIB vars to point to your ActiveSync sources</p>
<pre>    set INCLUDE=%INCLUDE%;C:\Program Files\Windows Mobile 6 SDK\Activesync\inc
    set LIB=%LIB%;C:\Program Files\Windows Mobile 6 SDK\Activesync\Lib</pre>
<p>Configure Qt</p>
<pre>    cd c:\Qt\4.5.2_winmobile6_standard
    configure.exe -debug -platform win32-msvc2008 -xplatform wincewm60standard-msvc2008 -cetest -plugindir \qtplugins</pre>
<p>Run setcepaths to setup embedded compiler paths</p>
<pre>    setcepaths wincewm60standard-msvc2008</pre>
<p>Use devtools/ibmake or nmake to build. If using ibmake, ensure devtools/shell is in your path and that you have <a href="http://qt.nokia.com/doc/4.6/http-www-activestate-com-products-activeperl-index-mhtml.html">ActivePerl</a> installed on your windows machine</p>
<pre>    ibmake</pre>
<p>or</p>
<pre>    nmake</pre>
<a name="build-mobility-messaging"></a>
<h2>Build Mobility Messaging</h2>
<p>Open a new Visual Studio cmd shell</p>
<p>Set the path to Qt</p>
<pre>    set PATH=%PATH%;c:\Qt\4.5.2_winmobile6_standard\bin</pre>
<p>Set QMAKESPEC</p>
<pre>    set QMAKESPEC=wincewm60standard-msvc2008</pre>
<p>Run setcepaths to set embedded compiler paths</p>
<pre>    setcepaths wincewm60standard-msvc2008</pre>
<p>Run qmake and build</p>
<pre>    cd &lt;path-to-mobility-messaging-depot-or-source-package&gt;
    qmake mobility.pro
    nmake</pre>
<p>Visual Studio is recommended to build the mobility project for windows mobile, although it is not necessary, it makes debugging and deployment easier.</p>
<pre>    cd &lt;path-to-mobility-messaging-depot&gt;
    qmake -tp vc QT_CONFIG+=release mobility.pro -recursive</pre>
<p>If using git edit your git configuration so it does not consider Visual Studio files</p>
<p>Edit &lt;path-to-mobility-messaging-depot&gt;/.git/info/exclude</p>
<p>Append the following</p>
<pre>    *.sln
    *.ncb
    *.suo
    *.user</pre>
<p>Open the generated *.sln file and compile.</p>
<p>If you get errors during the Visual Studio build regarding mainACRT, right click on the project, goto linker-advanced and Clear the Entry-Point value.</p>
<a name="deploy"></a>
<h2>Deploy</h2>
<p>Before running a debug instance, ensure that the QtMessaging.dll is a deployment dependency for the examples and tests.</p>
<p>Right click properties on project e.g&#x2e; serviceactions. Under deployment-&gt;addition files add:</p>
<pre>    &quot;QtMessaging.dll|$(TargetDir)|%CSIDL_PROGRAM_FILES%\serviceactions|0&quot;</pre>
<p>Replacing &quot;serviceactions&quot; with the relevant project</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2010 Nokia Corporation and/or its subsidiary(-ies)</td>
<td width="20%" align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qt Mobility Project 1.1.0</div></td>
</tr></table></div></address></body>
</html>
