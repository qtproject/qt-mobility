<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- qmessagemanager.cpp -->
  <title>Qt Mobility Project 1.0: QMessageManager Class Reference</title>
  <!--[if IE]><meta name="MSSmartTagsPreventParsing" content="true"><meta http-equiv="imagetoolbar" content="no"><![endif]--><!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="style/style_ie6.css"><![endif]--><!--[if IE 7]><link rel="stylesheet" type="text/css" href="style/style_ie7.css"><![endif]--><!--[if IE 8]><link rel="stylesheet" type="text/css" href="style/style_ie8.css"><![endif]-->  <link rel="stylesheet" type="text/css" href="style/style.css" />
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
</head>
<body class="offline"  onload="CheckEmptyAndLoadList();">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://qt.nokia.com/"><img src="images/qtlogo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">All&nbsp;Functions</font></a>&nbsp;&middot;</td>
<td align="right" valign="top" width="230"><img src="images/codeless.png"  border="0" /></td></tr></table>              <li><a href="modules.html">All Modules</a></li>              <li><a href="qmessagemanager.html">QMessageManager</a></li>
<div class="toc">
<h3>Contents</h3>
<ul>
<li class="level1"><a href="#public-types">Public Types</a></li>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#signals">Signals</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<h1 class="title">QMessageManager Class Reference</h1>
<p>The QMessageManager class represents the main interface for storage and retrieval of messages, folders and accounts in the system message store. <a href="#details">More...</a></p>
<pre class="highlightedCode">    #include &lt;QMessageManager&gt;</pre><p>Inherits <a href="http://qt.nokia.com/doc/4.6/qobject.html">QObject</a>.</p>
<ul>
<li><a href="qmessagemanager-members.html">List of all members, including inherited members</a></li>
</ul>
<hr />
<a name="public-types"></a>
<h2>Public Types</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> enum </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#Error-enum">Error</a></b> { NoError, InvalidId, ConstraintFailure, ContentInaccessible, ..., RequestIncomplete }</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> typedef </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#NotificationFilterId-typedef">NotificationFilterId</a></b></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> typedef </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#NotificationFilterIdSet-typedef">NotificationFilterIdSet</a></b></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> enum </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#RemovalOption-enum">RemovalOption</a></b> { RemoveLocalCopyOnly, RemoveOnOriginatingServer }</td></tr>
</table>
<hr />
<a name="public-functions"></a>
<h2>Public Functions</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#QMessageManager">QMessageManager</a></b> ( QObject * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#dtor.QMessageManager">~QMessageManager</a></b> ()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessageAccount </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#account">account</a></b> ( const QMessageAccountId &amp; <i>id</i> ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#addMessage">addMessage</a></b> ( QMessage * <i>message</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> int </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#countAccounts">countAccounts</a></b> ( const QMessageAccountFilter &amp; <i>filter</i> = QMessageAccountFilter() ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> int </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#countFolders">countFolders</a></b> ( const QMessageFolderFilter &amp; <i>filter</i> = QMessageFolderFilter() ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> int </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#countMessages">countMessages</a></b> ( const QMessageFilter &amp; <i>filter</i> = QMessageFilter() ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessageManager::Error </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#error">error</a></b> () const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessageFolder </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#folder">folder</a></b> ( const QMessageFolderId &amp; <i>id</i> ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessage </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#message">message</a></b> ( const QMessageId &amp; <i>id</i> ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessageAccountIdList </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#queryAccounts">queryAccounts</a></b> ( const QMessageAccountFilter &amp; <i>filter</i> = QMessageAccountFilter(), const QMessageAccountSortOrder &amp; <i>sortOrder</i> = QMessageAccountSortOrder(), uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessageAccountIdList </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#queryAccounts-2">queryAccounts</a></b> ( const QMessageAccountFilter &amp; <i>filter</i>, const QList&lt;QMessageAccountSortOrder&gt; &amp; <i>sortOrders</i>, uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessageFolderIdList </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#queryFolders">queryFolders</a></b> ( const QMessageFolderFilter &amp; <i>filter</i> = QMessageFolderFilter(), const QMessageFolderSortOrder &amp; <i>sortOrder</i> = QMessageFolderSortOrder(), uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessageFolderIdList </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#queryFolders-2">queryFolders</a></b> ( const QMessageFolderFilter &amp; <i>filter</i>, const QList&lt;QMessageFolderSortOrder&gt; &amp; <i>sortOrders</i>, uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessageIdList </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#queryMessages">queryMessages</a></b> ( const QMessageFilter &amp; <i>filter</i> = QMessageFilter(), const QMessageSortOrder &amp; <i>sortOrder</i> = QMessageSortOrder(), uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessageIdList </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#queryMessages-2">queryMessages</a></b> ( const QMessageFilter &amp; <i>filter</i>, const QList&lt;QMessageSortOrder&gt; &amp; <i>sortOrders</i>, uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessageIdList </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#queryMessages-3">queryMessages</a></b> ( const QMessageFilter &amp; <i>filter</i>, const QString &amp; <i>body</i>, QMessageDataComparator::MatchFlags <i>matchFlags</i> = 0, const QMessageSortOrder &amp; <i>sortOrder</i> = QMessageSortOrder(), uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QMessageIdList </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#queryMessages-4">queryMessages</a></b> ( const QMessageFilter &amp; <i>filter</i>, const QString &amp; <i>body</i>, QMessageDataComparator::MatchFlags <i>matchFlags</i>, const QList&lt;QMessageSortOrder&gt; &amp; <i>sortOrders</i>, uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> NotificationFilterId </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#registerNotificationFilter">registerNotificationFilter</a></b> ( const QMessageFilter &amp; <i>filter</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#removeMessage">removeMessage</a></b> ( const QMessageId &amp; <i>id</i>, RemovalOption <i>option</i> = RemoveOnOriginatingServer )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#removeMessages">removeMessages</a></b> ( const QMessageFilter &amp; <i>filter</i>, RemovalOption <i>option</i> = RemoveOnOriginatingServer )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#unregisterNotificationFilter">unregisterNotificationFilter</a></b> ( NotificationFilterId <i>notificationFilterId</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#updateMessage">updateMessage</a></b> ( QMessage * <i>message</i> )</td></tr>
</table>
<ul>
<li class="fn">29 public functions inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#public-functions">QObject</a></li>
</ul>
<hr />
<a name="signals"></a>
<h2>Signals</h2>
<table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#messageAdded">messageAdded</a></b> ( const QMessageId &amp; <i>id</i>, const QMessageManager::NotificationFilterIdSet &amp; <i>matchingFilterIds</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#messageRemoved">messageRemoved</a></b> ( const QMessageId &amp; <i>id</i>, const QMessageManager::NotificationFilterIdSet &amp; <i>matchingFilterIds</i> )</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qmessagemanager.html#messageUpdated">messageUpdated</a></b> ( const QMessageId &amp; <i>id</i>, const QMessageManager::NotificationFilterIdSet &amp; <i>matchingFilterIds</i> )</td></tr>
</table>
<ul>
<li class="fn">1 signal inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#signals">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li class="fn">1 property inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#properties">QObject</a></li>
<li class="fn">1 public slot inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#public-slots">QObject</a></li>
<li class="fn">1 public variable inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#public-variables">QObject</a></li>
<li class="fn">4 static public members inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#static-public-members">QObject</a></li>
<li class="fn">7 protected functions inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#protected-functions">QObject</a></li>
<li class="fn">2 protected variables inherited from <a href="http://qt.nokia.com/doc/4.6/qobject.html#protected-variables">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<div class="descr"/>
<h2>Detailed Description</h2>
<p>The QMessageManager class represents the main interface for storage and retrieval of messages, folders and accounts in the system message store.</p>
<p>The system contains a single store for messages, which is accessed via the handle class QMessageManager. QMessageManager provides the interface for adding, updating and deleting messages in the system's message store.</p>
<p>QMessageManager provides the <a href="qmessagemanager.html#countFolders">countFolders</a>() and <a href="qmessagemanager.html#queryFolders">queryFolders</a>() functions for counting and listing the folders contained by the messaging store, and the <a href="qmessagemanager.html#countAccounts">countAccounts</a>() and <a href="qmessagemanager.html#queryAccounts">queryAccounts</a>() functions for counting and listing the accounts contained by the store. These functions use the <a href="qmessagefolderfilter.html">QMessageFolderFilter</a> and <a href="qmessagefoldersortorder.html">QMessageFolderSortOrder</a> classes, and the <a href="qmessageaccountfilter.html">QMessageAccountFilter</a> and <a href="qmessageaccountsortorder.html">QMessageAccountSortOrder</a> classes to constrain their searches.</p>
<p>QMessageManager also implements functionality allowing the messages contained by the store to be counted or listed, using various filtering and sortOrder constraints. Clients can access this functionality via the <a href="qmessageservice.html#countMessages">countMessages</a> and <a href="qmessageservice.html#queryMessages">queryMessages</a> functions of the <a href="qmessageservice.html">QMessageService</a> class.</p>
<p>With the exception of Windows mobile and desktop platforms, QMessageManager functions should not initiate network activity. Instead functions are restricted to operating on data already on the device. See <a href="qmessageservice.html">QMessageService</a> for functions related to initiating network activity.</p>
<p>If a QMessageManager operation fails, the <a href="qmessagemanager.html#error">error</a>() function will return an error code value indicating the failure mode encountered. A successful operation will set the <a href="qmessagemanager.html#error">error</a>() result to <a href="qmessagemanager.html#Error-enum">QMessageManager::NoError</a>.</p>
<p>Messages in the messaging store are identified by <a href="qmessageid.html">QMessageId</a> objects. The data associated with a message is retrieved in the form of a <a href="qmessage.html">QMessage</a> object using <a href="qmessagemanager.html#message">message</a>(). Likewise a folder is retrieved in the form of a <a href="qmessagefolder.html">QMessageFolder</a> object using <a href="qmessagemanager.html#folder">folder</a>(), and an account is retrieved in the form of a <a href="qmessageaccount.html">QMessageAccount</a> object using <a href="qmessagemanager.html#account">account</a>().</p>
<p>Messages can be inserted into the store using the <a href="qmessagemanager.html#addMessage">addMessage</a>() function, messages in the store can be manipulated via the <a href="qmessagemanager.html#updateMessage">updateMessage</a>() function, and removed by the <a href="qmessagemanager.html#removeMessage">removeMessage</a>() functions.</p>
<p>Messaging store manipulations involving messages are reported via the messagesAdded(), messagesUpdated() and messagesRemoved() signals.</p>
</div>
<p>See also <a href="qmessage.html">QMessage</a>, <a href="qmessageid.html">QMessageId</a>, <a href="qmessagecontentcontainerid.html">QMessageContentContainerId</a>, and <a href="qmessageservice.html">QMessageService</a>.</p>
<hr />
<div class="types"/>
<h2>Member Type Documentation</h2>
<h3 class="fn"><a name="Error-enum"></a>enum QMessageManager::Error</h3>
<p>Defines the result of attempting to perform a messaging store operation.</p>
<table class="valuelist"><tr class="odd"><tr><th>Constant</th><th>Value</th><th>Description</th></tr>
<tr><td  class="topAlign"><tt>QMessageManager::NoError</tt></td><td class=" topAlign"><tt>0</tt></td><td  class="topAlign">The operation was successfully performed.</td></tr>
<tr><td  class="topAlign"><tt>QMessageManager::InvalidId</tt></td><td class=" topAlign"><tt>1</tt></td><td  class="topAlign">The operation failed due to the specification of an invalid identifier.</td></tr>
<tr><td  class="topAlign"><tt>QMessageManager::ConstraintFailure</tt></td><td class=" topAlign"><tt>2</tt></td><td  class="topAlign">The operation failed due to a constraint violation.</td></tr>
<tr><td  class="topAlign"><tt>QMessageManager::ContentInaccessible</tt></td><td class=" topAlign"><tt>3</tt></td><td  class="topAlign">The operation failed because the content data cannot be accessed by the messaging store.</td></tr>
<tr><td  class="topAlign"><tt>QMessageManager::NotYetImplemented</tt></td><td class=" topAlign"><tt>4</tt></td><td  class="topAlign">The operation failed because the messaging store does not yet implement the operation.</td></tr>
<tr><td  class="topAlign"><tt>QMessageManager::FrameworkFault</tt></td><td class=" topAlign"><tt>5</tt></td><td  class="topAlign">The operation failed because the messaging store encountered an error in performing the operation.</td></tr>
<tr><td  class="topAlign"><tt>QMessageManager::WorkingMemoryOverflow</tt></td><td class=" topAlign"><tt>6</tt></td><td  class="topAlign">The operation failed because the messaging store exhausted all memory available for evaluating queries.</td></tr>
<tr><td  class="topAlign"><tt>QMessageManager::Busy</tt></td><td class=" topAlign"><tt>7</tt></td><td  class="topAlign">The operation failed because the messaging store is being used by another thread.</td></tr>
<tr><td  class="topAlign"><tt>QMessageManager::RequestIncomplete</tt></td><td class=" topAlign"><tt>8</tt></td><td  class="topAlign">The operation failed to report successful completion, although no specific error was reported.</td></tr>
</table>
<h3 class="fn"><a name="NotificationFilterId-typedef"></a>typedef QMessageManager::NotificationFilterId</h3>
<p>This type contains a value identifying a registered message filter.</p>
<h3 class="fn"><a name="NotificationFilterIdSet-typedef"></a>typedef QMessageManager::NotificationFilterIdSet</h3>
<p>This type contains a set of values identifying registered message filters.</p>
<h3 class="fn"><a name="RemovalOption-enum"></a>enum QMessageManager::RemovalOption</h3>
<p>Defines whether or not a message will be removed from the originating server.</p>
<table class="valuelist"><tr class="odd"><tr><th>Constant</th><th>Value</th><th>Description</th></tr>
<tr><td  class="topAlign"><tt>QMessageManager::RemoveLocalCopyOnly</tt></td><td class=" topAlign"><tt>1</tt></td><td  class="topAlign">Do not remove the message from the originating server.</td></tr>
<tr><td  class="topAlign"><tt>QMessageManager::RemoveOnOriginatingServer</tt></td><td class=" topAlign"><tt>2</tt></td><td  class="topAlign">Remove the message both from the local store and from the originating server if any.</td></tr>
</table>
</div>
<hr />
<div class="func"/>
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QMessageManager"></a>QMessageManager::QMessageManager ( <a href="http://qt.nokia.com/doc/4.6/qobject.html">QObject</a> * <i>parent</i> = 0 )</h3>
<p>Constructs a handle to the message store.</p>
<p>If <i>parent</i> is not 0 then the handle will be deleted when <i>parent</i> is deleted.</p>
<h3 class="fn"><a name="dtor.QMessageManager"></a>QMessageManager::~QMessageManager ()</h3>
<p>Destroys the handle to the message store.</p>
<h3 class="fn"><a name="account"></a><a href="qmessageaccount.html">QMessageAccount</a> QMessageManager::account ( const <a href="qmessageaccountid.html">QMessageAccountId</a> &amp; <i>id</i> ) const</h3>
<p>Returns the <a href="qmessageaccount.html">QMessageAccount</a> identified by <i>id</i> from the store.</p>
<h3 class="fn"><a name="addMessage"></a>bool QMessageManager::addMessage ( <a href="qmessage.html">QMessage</a> * <i>message</i> )</h3>
<p>Adds a copy of the message indicated by <i>message</i> to the messaging store and modifies the message indicated by <i>message</i> to contain the identifier of the created message.</p>
<p>Returns <tt>true</tt> if the operation successfully updates the store; otherwise returns <tt>false</tt>.</p>
<p>To ensure the change is propagated to any affected external server <a href="qmessageservice.html#exportUpdates">QMessageService::exportUpdates</a>() should be subsequently called.</p>
<p>On the Maemo 5 (Fremantle) platform for SMS type messages this function is not yet supported.</p>
<p>Using this function to explicitly set a size or date is not currently supported on some platforms.</p>
<p>See also <a href="qmessagemanager.html#message">message</a>(), <a href="qmessagemanager.html#updateMessage">updateMessage</a>(), <a href="qmessagemanager.html#removeMessage">removeMessage</a>(), and <a href="qmessageservice.html#exportUpdates">QMessageService::exportUpdates</a>().</p>
<h3 class="fn"><a name="countAccounts"></a>int QMessageManager::countAccounts ( const <a href="qmessageaccountfilter.html">QMessageAccountFilter</a> &amp; <i>filter</i> = QMessageAccountFilter() ) const</h3>
<p>Returns the number of messages which match the filtering criteria defined in <a href="qmessageaccountfilter.html">QMessageAccountFilter</a> <i>filter</i>. If <i>filter</i> is empty the count of all available accounts is returned.</p>
<p>See also <a href="qmessagemanager.html#error">error</a>() and <a href="qmessagemanager.html#queryAccounts">queryAccounts</a>().</p>
<h3 class="fn"><a name="countFolders"></a>int QMessageManager::countFolders ( const <a href="qmessagefolderfilter.html">QMessageFolderFilter</a> &amp; <i>filter</i> = QMessageFolderFilter() ) const</h3>
<p>Returns the number of folders which match the filtering criteria defined in <a href="qmessagefolderfilter.html">QMessageFolderFilter</a> <i>filter</i>. If <i>filter</i> is empty the count of all available folders is returned.</p>
<p>See also <a href="qmessagemanager.html#error">error</a>() and <a href="qmessagemanager.html#queryFolders">queryFolders</a>().</p>
<h3 class="fn"><a name="countMessages"></a>int QMessageManager::countMessages ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i> = QMessageFilter() ) const</h3>
<p>Returns the number of messages which match the filtering criteria defined in <a href="qmessagefilter.html">QMessageFilter</a> <i>filter</i>. If <i>filter</i> is empty the count of all available messages is returned.</p>
<p>The performance of counting messages is currently significantly less than optimal for some filters on some platforms.</p>
<p>See also <a href="qmessagemanager.html#error">error</a>() and <a href="qmessagemanager.html#queryMessages">queryMessages</a>().</p>
<h3 class="fn"><a name="error"></a><a href="qmessagemanager.html#Error-enum">QMessageManager::Error</a> QMessageManager::error () const</h3>
<p>Returns the code of the last error condition reported by the messaging store.</p>
<h3 class="fn"><a name="folder"></a><a href="qmessagefolder.html">QMessageFolder</a> QMessageManager::folder ( const <a href="qmessagefolderid.html">QMessageFolderId</a> &amp; <i>id</i> ) const</h3>
<p>Returns the <a href="qmessagefolder.html">QMessageFolder</a> identified by <i>id</i> from the store.</p>
<h3 class="fn"><a name="message"></a><a href="qmessage.html">QMessage</a> QMessageManager::message ( const <a href="qmessageid.html">QMessageId</a> &amp; <i>id</i> ) const</h3>
<p>Returns the <a href="qmessage.html">QMessage</a> identified by <i>id</i> from the store.</p>
<h3 class="fn"><a name="messageAdded"></a>void QMessageManager::messageAdded ( const <a href="qmessageid.html">QMessageId</a> &amp; <i>id</i>, const <a href="qmessagemanager.html#NotificationFilterIdSet-typedef">QMessageManager::NotificationFilterIdSet</a> &amp; <i>matchingFilterIds</i> )<tt> [signal]</tt></h3>
<p>Signal that is emitted when the message identified by <i>id</i> is added to the message store. <i>matchingFilterIds</i> contains a set of values identifiying registered notification filters that matched the message.</p>
<p>See also <a href="qmessagemanager.html#messageRemoved">messageRemoved</a>(), <a href="qmessagemanager.html#messageUpdated">messageUpdated</a>(), and <a href="qmessagemanager.html#registerNotificationFilter">registerNotificationFilter</a>().</p>
<h3 class="fn"><a name="messageRemoved"></a>void QMessageManager::messageRemoved ( const <a href="qmessageid.html">QMessageId</a> &amp; <i>id</i>, const <a href="qmessagemanager.html#NotificationFilterIdSet-typedef">QMessageManager::NotificationFilterIdSet</a> &amp; <i>matchingFilterIds</i> )<tt> [signal]</tt></h3>
<p>Signal that is emitted when the message identified by <i>id</i> is removed from the message store. <i>matchingFilterIds</i> contains a set of values identifiying registered notification filters that matched the message.</p>
<p>Since the filters apply to the state of the data after the message removal, the only data item that may be subject to filtration is the identifier of the removed message.</p>
<p>See also <a href="qmessagemanager.html#messageAdded">messageAdded</a>(), <a href="qmessagemanager.html#messageUpdated">messageUpdated</a>(), and <a href="qmessagemanager.html#registerNotificationFilter">registerNotificationFilter</a>().</p>
<h3 class="fn"><a name="messageUpdated"></a>void QMessageManager::messageUpdated ( const <a href="qmessageid.html">QMessageId</a> &amp; <i>id</i>, const <a href="qmessagemanager.html#NotificationFilterIdSet-typedef">QMessageManager::NotificationFilterIdSet</a> &amp; <i>matchingFilterIds</i> )<tt> [signal]</tt></h3>
<p>Signal that is emitted when the message identified by <i>id</i> is updated in the message store. <i>matchingFilterIds</i> contains a set of values identifiying registered notification filters that matched the message.</p>
<p>Since the filters apply to the state of the data after the message modification, updates to messages which matched a given filter prior to modification but not afterwards will not result in the emission of the messageUpdated signal.</p>
<p>See also <a href="qmessagemanager.html#messageAdded">messageAdded</a>(), <a href="qmessagemanager.html#messageRemoved">messageRemoved</a>(), and <a href="qmessagemanager.html#registerNotificationFilter">registerNotificationFilter</a>().</p>
<h3 class="fn"><a name="queryAccounts"></a>QMessageAccountIdList QMessageManager::queryAccounts ( const <a href="qmessageaccountfilter.html">QMessageAccountFilter</a> &amp; <i>filter</i> = QMessageAccountFilter(), const <a href="qmessageaccountsortorder.html">QMessageAccountSortOrder</a> &amp; <i>sortOrder</i> = QMessageAccountSortOrder(), <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessageaccountid.html">QMessageAccountId</a>s of accounts in the messaging store. If <i>filter</i> is not empty only accounts matching the parameters set by <i>filter</i> will be returned, otherwise identifiers for all accounts will be returned. If <i>sortOrder</i> is not empty, then the identifiers will be sorted by the parameters set by <i>sortOrder</i>. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned.</p>
<p>See also <a href="qmessagemanager.html#error">error</a>() and <a href="qmessagemanager.html#countAccounts">countAccounts</a>().</p>
<h3 class="fn"><a name="queryAccounts-2"></a>QMessageAccountIdList QMessageManager::queryAccounts ( const <a href="qmessageaccountfilter.html">QMessageAccountFilter</a> &amp; <i>filter</i>, const <a href="http://qt.nokia.com/doc/4.6/qlist.html">QList</a>&lt;<a href="qmessageaccountsortorder.html">QMessageAccountSortOrder</a>&gt; &amp; <i>sortOrders</i>, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessageaccountid.html">QMessageAccountId</a>s of accounts in the messaging store. If <i>filter</i> is not empty only accounts matching the parameters set by <i>filter</i> will be returned, otherwise identifiers for all accounts will be returned. If <i>sortOrders</i> is not empty, then the identifiers will be sorted by applying each sort order element in sequence. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned.</p>
<p>See also <a href="qmessagemanager.html#error">error</a>() and <a href="qmessagemanager.html#countAccounts">countAccounts</a>().</p>
<h3 class="fn"><a name="queryFolders"></a>QMessageFolderIdList QMessageManager::queryFolders ( const <a href="qmessagefolderfilter.html">QMessageFolderFilter</a> &amp; <i>filter</i> = QMessageFolderFilter(), const <a href="qmessagefoldersortorder.html">QMessageFolderSortOrder</a> &amp; <i>sortOrder</i> = QMessageFolderSortOrder(), <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessagefolderid.html">QMessageFolderId</a>s of folders in the messaging store. If <i>filter</i> is not empty only folders matching the parameters set by <i>filter</i> will be returned, otherwise identifiers for all folders will be returned. If <i>sortOrder</i> is not empty, then the identifiers will be sorted by the parameters set by <i>sortOrder</i>. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned.</p>
<p>See also <a href="qmessagemanager.html#error">error</a>() and <a href="qmessagemanager.html#countFolders">countFolders</a>().</p>
<h3 class="fn"><a name="queryFolders-2"></a>QMessageFolderIdList QMessageManager::queryFolders ( const <a href="qmessagefolderfilter.html">QMessageFolderFilter</a> &amp; <i>filter</i>, const <a href="http://qt.nokia.com/doc/4.6/qlist.html">QList</a>&lt;<a href="qmessagefoldersortorder.html">QMessageFolderSortOrder</a>&gt; &amp; <i>sortOrders</i>, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessagefolderid.html">QMessageFolderId</a>s of folders in the messaging store. If <i>filter</i> is not empty only folders matching the parameters set by <i>filter</i> will be returned, otherwise identifiers for all folders will be returned. If <i>sortOrders</i> is not empty, then the identifiers will be sorted by applying each sort order element in sequence. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned.</p>
<p>See also <a href="qmessagemanager.html#error">error</a>() and <a href="qmessagemanager.html#countFolders">countFolders</a>().</p>
<h3 class="fn"><a name="queryMessages"></a>QMessageIdList QMessageManager::queryMessages ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i> = QMessageFilter(), const <a href="qmessagesortorder.html">QMessageSortOrder</a> &amp; <i>sortOrder</i> = QMessageSortOrder(), <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessageid.html">QMessageId</a>s of messages in the messaging store. If <i>filter</i> is not empty only messages matching the parameters set by <i>filter</i> will be returned, otherwise identifiers for all messages will be returned. If <i>sortOrder</i> is not empty, then the identifiers will be sorted by the parameters set by <i>sortOrder</i>. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned.</p>
<p>The performance of querying messages is currently significantly less than optimal for some querying criteria on some platforms.</p>
<p>See also <a href="qmessagemanager.html#error">error</a>() and <a href="qmessagemanager.html#countMessages">countMessages</a>().</p>
<h3 class="fn"><a name="queryMessages-2"></a>QMessageIdList QMessageManager::queryMessages ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i>, const <a href="http://qt.nokia.com/doc/4.6/qlist.html">QList</a>&lt;<a href="qmessagesortorder.html">QMessageSortOrder</a>&gt; &amp; <i>sortOrders</i>, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessageid.html">QMessageId</a>s of messages in the messaging store. If <i>filter</i> is not empty only messages matching the parameters set by <i>filter</i> will be returned, otherwise identifiers for all messages will be returned. If <i>sortOrders</i> is not empty, then the identifiers will be sorted by applying each sort order element in sequence. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned.</p>
<p>The performance of querying messages is currently significantly less than optimal for some querying criteria on some platforms.</p>
<p>See also <a href="qmessagemanager.html#error">error</a>() and <a href="qmessagemanager.html#countMessages">countMessages</a>().</p>
<h3 class="fn"><a name="queryMessages-3"></a>QMessageIdList QMessageManager::queryMessages ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i>, const <a href="http://qt.nokia.com/doc/4.6/qstring.html">QString</a> &amp; <i>body</i>, <a href="qmessagedatacomparator.html#MatchFlag-enum">QMessageDataComparator::MatchFlags</a> <i>matchFlags</i> = 0, const <a href="qmessagesortorder.html">QMessageSortOrder</a> &amp; <i>sortOrder</i> = QMessageSortOrder(), <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessageid.html">QMessageId</a>s of messages in the messaging store. If <i>filter</i> is not empty only messages matching the parameters set by <i>filter</i> and with a body containing the string <i>body</i> will be returned, otherwise identifiers for all messages with a body containing <i>body</i> will be returned. If <i>sortOrder</i> is not empty, then the identifiers will be sorted by the parameters set by <i>sortOrder</i>. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned. <i>matchFlags</i> specifies the matching method to use.</p>
<p>The performance of querying messages is currently significantly less than optimal for some querying criteria on some platforms.</p>
<p>See also <a href="qmessagemanager.html#error">error</a>() and <a href="qmessagemanager.html#countMessages">countMessages</a>().</p>
<h3 class="fn"><a name="queryMessages-4"></a>QMessageIdList QMessageManager::queryMessages ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i>, const <a href="http://qt.nokia.com/doc/4.6/qstring.html">QString</a> &amp; <i>body</i>, <a href="qmessagedatacomparator.html#MatchFlag-enum">QMessageDataComparator::MatchFlags</a> <i>matchFlags</i>, const <a href="http://qt.nokia.com/doc/4.6/qlist.html">QList</a>&lt;<a href="qmessagesortorder.html">QMessageSortOrder</a>&gt; &amp; <i>sortOrders</i>, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.6/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessageid.html">QMessageId</a>s of messages in the messaging store. If <i>filter</i> is not empty only messages matching the parameters set by <i>filter</i> and with a body containing the string <i>body</i> will be returned, otherwise identifiers for all messages with a body containing <i>body</i> will be returned. If <i>sortOrders</i> is not empty, then the identifiers will be sorted by applying each sort order element in sequence. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned. <i>matchFlags</i> specifies the matching method to use.</p>
<p>The performance of querying messages is currently significantly less than optimal for some querying criteria on some platforms.</p>
<p>See also <a href="qmessagemanager.html#error">error</a>() and <a href="qmessagemanager.html#countMessages">countMessages</a>().</p>
<h3 class="fn"><a name="registerNotificationFilter"></a><a href="qmessagemanager.html#NotificationFilterId-typedef">NotificationFilterId</a> QMessageManager::registerNotificationFilter ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i> )</h3>
<p>Registers a message filter that will be used to generate <a href="qmessagemanager.html#messageAdded">messageAdded</a>(), <a href="qmessagemanager.html#messageRemoved">messageRemoved</a>() and <a href="qmessagemanager.html#messageUpdated">messageUpdated</a>() signals. Returns an identifier value that can be used to identify the reason that a signal was emitted, and to unregister the filter at a later time.</p>
<p>The <i>filter</i> is applied to the state of the data after the occurrence of the event for which a notification may be emitted.</p>
<p>See also <a href="qmessagemanager.html#unregisterNotificationFilter">unregisterNotificationFilter</a>(), <a href="qmessagemanager.html#messageAdded">messageAdded</a>(), <a href="qmessagemanager.html#messageRemoved">messageRemoved</a>(), and <a href="qmessagemanager.html#messageUpdated">messageUpdated</a>().</p>
<h3 class="fn"><a name="removeMessage"></a>bool QMessageManager::removeMessage ( const <a href="qmessageid.html">QMessageId</a> &amp; <i>id</i>, <a href="qmessagemanager.html#RemovalOption-enum">RemovalOption</a> <i>option</i> = RemoveOnOriginatingServer )</h3>
<p>Removes the message with <a href="qmessageid.html">QMessageId</a> <i>id</i> from the messaging store. If <i>option</i> is <a href="qmessagemanager.html#RemovalOption-enum">QMessageManager::RemoveOnOriginatingServer</a> then when synchronization is performed the message should be removed from both the local message store and the originating server if any.</p>
<p>Returns <tt>true</tt> if the operation successfully updates the store; otherwise returns <tt>false</tt>.</p>
<p>To ensure the change is propagated to any affected external server <a href="qmessageservice.html#exportUpdates">QMessageService::exportUpdates</a>() should be subsequently called.</p>
<p><i>option</i> is ignored on Windows mobile and desktop platforms.</p>
<p>See also <a href="qmessagemanager.html#removeMessages">removeMessages</a>(), <a href="qmessagemanager.html#addMessage">addMessage</a>(), <a href="qmessagemanager.html#updateMessage">updateMessage</a>(), and <a href="qmessageservice.html#exportUpdates">QMessageService::exportUpdates</a>().</p>
<h3 class="fn"><a name="removeMessages"></a>bool QMessageManager::removeMessages ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i>, <a href="qmessagemanager.html#RemovalOption-enum">RemovalOption</a> <i>option</i> = RemoveOnOriginatingServer )</h3>
<p>Removes all messages identified by the filter <i>filter</i> from the messaging store. If <i>option</i> is <a href="qmessagemanager.html#RemovalOption-enum">QMessageManager::RemoveOnOriginatingServer</a> then when synchronization is performed the messages should be removed from both the local message store and the originating server if any.</p>
<p>Returns <tt>true</tt> if the operation successfully updates the store; otherwise returns <tt>false</tt>.</p>
<p>To ensure the change is propagated to any affected external server <a href="qmessageservice.html#exportUpdates">QMessageService::exportUpdates</a>() should be subsequently called.</p>
<p><i>option</i> is ignored on Windows mobile and desktop platforms.</p>
<p>For example:</p>
<p>To implement a function to remove a list messages identified by QMessageIds from the messaging store.</p>
<pre class="highlightedCode">    bool removeMessages(const QMessageIdList&amp; ids)
    {
        QMessageFilter idsFilter(ids);
        return QMessageManager().removeMessages(idsFilter);
    }</pre>
<p>See also <a href="qmessagemanager.html#removeMessage">removeMessage</a>(), <a href="qmessagemanager.html#addMessage">addMessage</a>(), <a href="qmessagemanager.html#updateMessage">updateMessage</a>(), and <a href="qmessageservice.html#exportUpdates">QMessageService::exportUpdates</a>().</p>
<h3 class="fn"><a name="unregisterNotificationFilter"></a>void QMessageManager::unregisterNotificationFilter ( <a href="qmessagemanager.html#NotificationFilterId-typedef">NotificationFilterId</a> <i>notificationFilterId</i> )</h3>
<p>Removes the message filter associated with <i>notificationFilterId</i> from the set used to generate message event signals.</p>
<p>See also <a href="qmessagemanager.html#registerNotificationFilter">registerNotificationFilter</a>(), <a href="qmessagemanager.html#messageAdded">messageAdded</a>(), <a href="qmessagemanager.html#messageRemoved">messageRemoved</a>(), and <a href="qmessagemanager.html#messageUpdated">messageUpdated</a>().</p>
<h3 class="fn"><a name="updateMessage"></a>bool QMessageManager::updateMessage ( <a href="qmessage.html">QMessage</a> * <i>message</i> )</h3>
<p>Updates the messaging store so that the message whose identifier is contained by the message at <i>message</i> contains the content at <i>message</i>. If <i>message</i> does not contain a valid identifier, no changes will result. Internal data of the <a href="qmessage.html">QMessage</a> object at <i>message</i> can be modified by this operation.</p>
<p>Returns <tt>true</tt> if the operation successfully updates the store; otherwise returns <tt>false</tt>.</p>
<p>To ensure the change is propagated to any affected external server <a href="qmessageservice.html#exportUpdates">QMessageService::exportUpdates</a>() should be subsequently called.</p>
<p>Using this function to explicitly set a size or date is not currently supported on some platforms.</p>
<p>On the Maemo 5 (Fremantle) platform this function may only be used to update the priority and status of email type messages.</p>
<p>See also <a href="qmessagemanager.html#addMessage">addMessage</a>(), <a href="qmessagemanager.html#removeMessage">removeMessage</a>(), and <a href="qmessageservice.html#exportUpdates">QMessageService::exportUpdates</a>().</p>
</div>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2010 Nokia Corporation and/or its subsidiary(-ies)</td>
<td width="20%" align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qt Mobility Project 1.0.1</div></td>
</tr></table></div></address>  <script src="scripts/functions.js" type="text/javascript"></script>
</body>
</html>
