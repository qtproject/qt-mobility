<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- contactsasync.qdoc -->
  <title>Qt 1.1: Contacts Asynchronous API</title>
  <link rel="stylesheet" type="text/css" href="style/style.css"
 />  <!--[if IE]>
<meta name="MSSmartTagsPreventParsing" content="true">
<meta http-equiv="imagetoolbar" content="no">
<![endif]-->
<!--[if lt IE 7]>
<link rel="stylesheet" type="text/css" href="style/style_ie6.css">
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="style/style_ie7.css">
<![endif]-->
<!--[if IE 8]>
<link rel="stylesheet" type="text/css" href="style/style_ie8.css">
<![endif]-->
  <script src="scripts/jquery.js" type="text/javascript"></script>
  <script src="scripts/functions.js" type="text/javascript"></script>
 <script src="./scripts/superfish.js" type="text/javascript"></script>
 <script src="./scripts/narrow.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="style/superfish.css" />  <link rel="stylesheet" type="text/css" href="style/narrow.css" /></head>
<body class="" onload="CheckEmptyAndLoadList();">
 <div class="header" id="qtdocheader">
    <div id="nav-logo">
      <a href="index.html">Home</a></div>
    <a href="index.html" class="qtref"><span>Qt Mobility Reference Documentation</span></a>
    <div id="nav-topright">
      <ul>
        <li class="nav-topright-home"><a href="http://qt.nokia.com/">Qt HOME</a></li>
        <li class="nav-topright-dev"><a href="http://qt.nokia.com/developer">DEV</a></li>
        <li class="nav-topright-labs"><a href="http://labs.qt.nokia.com/blogs/">LABS</a></li>
        <li class="nav-topright-doc nav-topright-doc-active"><a href="http://doc.qt.nokia.com/">
          DOC</a></li>
        <li class="nav-topright-blog"><a href="http://blog.qt.nokia.com/">BLOG</a></li>
        <li class="nav-topright-shop"><a title="SHOP" href="http://shop.qt.nokia.com">SHOP</a></li>
      </ul>
    </div>
    <div id="shortCut">
      <ul>
        <li class="shortCut-topleft-inactive"><span><a href="index.html">Mobility 1.1</a></span></li>
        <li class="shortCut-topleft-active"><a href="http://qt.nokia.com/doc/">ALL Qt VERSIONS        </a></li>
      </ul>
    </div>
  </div>
  <div class="wrapper">
    <div class="hd">
      <span></span>
    </div>
    <div class="bd group">
      <div class="sidebar">
        <div class="searchlabel">
          Search index:</div>
        <div class="search">
          <form id="qtdocsearch" action="">
            <fieldset>
              <input type="text" name="searchstring" id="pageType" value="" />
            </fieldset>
          </form>
        </div>
        <div class="box first bottombar" id="lookup">
          <h2><span></span>
            API Lookup</h2>
          <div  id="list001" class="list">
          <ul id="ul001" >
              <li class="defaultLink"><a href="classes.html">Class index</a></li>
              <li class="defaultLink"><a href="functions.html">Function index</a></li>
              <li class="defaultLink"><a href="modules.html">Modules</a></li>
              <li class="defaultLink"><a href="namespaces.html">Namespaces</a></li>
              <li class="defaultLink"><a href="qtglobal.html">Global stuff</a></li>
              <li class="defaultLink"><a href="qdeclarativeelements.html">QML elements</a></li>
            </ul> 
          </div>
        </div>
        <div class="box bottombar" id="topics">
          <h2><span></span>
            Qt Topics</h2>
          <div id="list002" class="list">
            <ul id="ul002" >
              <li class="defaultLink"><a href="qt-basic-concepts.html">Basic Qt architecture</a></li>
              <li class="defaultLink"><a href="declarativeui.html">Device UI's &amp; Qt Quick</a></li>
              <li class="defaultLink"><a href="qt-gui-concepts.html">Desktop UI components</a></li>
              <li class="defaultLink"><a href="platform-specific.html">Platform-specific info</a></li>
            </ul>  
          </div>
        </div>
        <div class="box" id="examples">
          <h2><span></span>
            Examples</h2>
          <div id="list003" class="list">
        <ul id="ul003">
              <li class="defaultLink"><a href="all-examples.html">Examples</a></li>
              <li class="defaultLink"><a href="tutorials.html">Tutorials</a></li>
              <li class="defaultLink"><a href="demos.html">Demos</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html">QML Examples</a></li>
              <li class="defaultLink"><a href="qdeclarativeexamples.html#Demos">QML Demos</a></li>
            </ul> 
          </div>
        </div>
      </div>
      <div class="wrap">
        <div class="toolbar">
          <div class="breadcrumb toolblock">
            <ul>
              <li class="first"><a href="index.html">Home</a></li>
              <!--  Bread crumbs goes here -->
              <li>Contacts Asynchronous API</li>            </ul>
          </div>
          <div class="toolbuttons toolblock">
            <ul>
              <li id="smallA" class="t_button">A</li>
              <li id="medA" class="t_button active">A</li>
              <li id="bigA" class="t_button">A</li>
              <li id="print" class="t_button"><a href="javascript:this.print();">
                <span>Print</span></a></li>
            </ul>
          </div>
        </div>
        <div class="content">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#introduction">Introduction</a></li>
<li class="level1"><a href="#using-the-api">Using the API</a></li>
<li class="level2"><a href="#contact-manipulation">Contact Manipulation</a></li>
<li class="level3"><a href="#relationship-manipulation">Relationship Manipulation</a></li>
<li class="level2"><a href="#schema-manipulation">Schema Manipulation</a></li>
<li class="level1"><a href="#examples-of-usage">Examples Of Usage</a></li>
<li class="level2"><a href="#fetching-contacts">Fetching Contacts</a></li>
<li class="level2"><a href="#other-asynchronous-operations">Other Asynchronous Operations</a></li>
</ul>
</div>
<h1 class="title">Contacts Asynchronous API</h1>
<span class="subtitle"></span>
<div class="descr"/>
<a name="introduction"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h2>Introduction</h2>
<p>The Contacts Asynchronous API enables a client to asynchronously fetch, update, or remove contact, relationship or schema data from a contact manager. Use of the asynchronous API offers the programmer greater flexibility when requesting information from remote or slow local datastores.</p>
<a name="using-the-api"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h2>Using the API</h2>
<p>The asynchronous API offered by the Contacts module is available through classes derived from the <a href="qcontactabstractrequest.html">QContactAbstractRequest</a> class. It consists of three major sections:</p>
<ul>
<li>Contact Manipulation</li>
<li>Relationship Manipulation</li>
<li>Schema Manipulation</li>
</ul>
<p>The functionality offered by the synchronous API in these three categories is also available through the asynchronous API. There is one category of functionality which is not provided by the asynchronous API which is provided by the synchronous API: some information and reporting functionality is only provided through the synchronous API.</p>
<p>For detailed information about the information and reporting functionality provided, please refer to the documentation for the <a href="contactssync.html">Contacts Synchronous API</a>.</p>
<p>The functions to set and retrieve the id of the self-contact are also only provided by the synchronous API.</p>
<a name="contact-manipulation"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h3>Contact Manipulation</h3>
<p>The most common type of operation that clients will perform involves retrieval or modification of contacts. For in-depth information about contact manipulation, please refer to the <a href="contactssync.html">Contacts Synchronous API</a>.</p>
<p>There are four different types of operation which are supported by the asynchronous API:</p>
<ul>
<li>Fetch contact ids</li>
<li>Fetch contacts</li>
<li>Save contacts (create or update)</li>
<li>Remove contacts</li>
</ul>
<p>These operations are supported via the <a href="qcontactlocalidfetchrequest.html">QContactLocalIdFetchRequest</a>, <a href="qcontactfetchrequest.html">QContactFetchRequest</a>, <a href="qcontactsaverequest.html">QContactSaveRequest</a> and <a href="qcontactremoverequest.html">QContactRemoveRequest</a> classes, respectively.</p>
<p>The synchronous API offered by the <a href="qcontactmanager.html">QContactManager</a> class to allow manipulation of contacts consists of the following functions:</p>
<ul>
<li>contactIds(const QList&lt;<a href="qcontactsortorder.html">QContactSortOrder</a>&gt;&amp; <a href="location-overview.html#sortorders">sortOrders</a> = QList&lt;<a href="qcontactsortorder.html">QContactSortOrder</a>&gt;()) const</li>
<li>contactIds(const <a href="qcontactfilter.html">QContactFilter</a>&amp; filter, const QList&lt;<a href="qcontactsortorder.html">QContactSortOrder</a>&gt;&amp; <a href="location-overview.html#sortorders">sortOrders</a> = QList&lt;<a href="qcontactsortorder.html">QContactSortOrder</a>&gt;()) const</li>
<li>contacts(const QList&lt;<a href="qcontactsortorder.html">QContactSortOrder</a>&gt;&amp; <a href="location-overview.html#sortorders">sortOrders</a> = QList&lt;<a href="qcontactsortorder.html">QContactSortOrder</a>&gt;(), const <a href="qcontactfetchhint.html">QContactFetchHint</a>&amp; fetchHint = QContactFetchHint()) const</li>
<li>contacts(const <a href="qcontactfilter.html">QContactFilter</a>&amp; filter, const QList&lt;<a href="qcontactsortorder.html">QContactSortOrder</a>&gt;&amp; <a href="location-overview.html#sortorders">sortOrders</a> = QList&lt;<a href="qcontactsortorder.html">QContactSortOrder</a>&gt;(), const <a href="qcontactfetchhint.html">QContactFetchHint</a>&amp; fetchHint = QContactFetchHint()) const</li>
<li>saveContacts(QList&lt;<a href="qcontact.html">QContact</a>&gt;* contacts, QMap&lt;int, <a href="qcontactmanager.html#Error-enum">QContactManager::Error</a>&gt;* errorMap)</li>
<li>removeContacts(QList&lt;QContactLocalId&gt;* contactIds, QMap&lt;int, <a href="qcontactmanager.html#Error-enum">QContactManager::Error</a>&gt;* errorMap)</li>
</ul>
<a name="relationship-manipulation"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h4>Relationship Manipulation</h4>
<p>Contacts may be related in various ways. The contacts API allows clients to define relationships between contacts. For in-depth information about relationship manipulation, please refer to the <a href="contactssync.html">Contacts Synchronous API</a>.</p>
<p>There are three different types of operation which are supported by the asynchronous API:</p>
<ul>
<li>Fetch relationships</li>
<li>Save relationships (create or update, if supported by the backend)</li>
<li>Remove relationships (if supported by the backend)</li>
</ul>
<p>These operations are supported via the <a href="qcontactrelationshipfetchrequest.html">QContactRelationshipFetchRequest</a>, <a href="qcontactrelationshipsaverequest.html">QContactRelationshipSaveRequest</a> and <a href="qcontactrelationshipremoverequest.html">QContactRelationshipRemoveRequest</a> classes respectively.</p>
<p>The synchronous API offered by the <a href="qcontactmanager.html">QContactManager</a> class to allow manipulation of relationships consists of the following functions:</p>
<ul>
<li>relationships(const <a href="qcontactid.html">QContactId</a>&amp; participantId, QContactRelationshipFilter::Role role = QContactRelationshipFilter::Either) const;</li>
<li>relationships(const QString&amp; relationshipType = QString(), const <a href="qcontactid.html">QContactId</a>&amp; participantId = QContactId(), QContactRelationshipFilter::Role role = QContactRelationshipFilter::Either) const;</li>
<li>saveRelationship(<a href="qcontactrelationship.html">QContactRelationship</a>* relationship);</li>
<li>saveRelationships(QList&lt;<a href="qcontactrelationship.html">QContactRelationship</a>&gt;* relationships);</li>
<li>removeRelationship(const <a href="qcontactrelationship.html">QContactRelationship</a>&amp; relationship);</li>
<li>removeRelationships(const QList&lt;<a href="qcontactrelationship.html">QContactRelationship</a>&gt;&amp; relationships);</li>
</ul>
<a name="schema-manipulation"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h3>Schema Manipulation</h3>
<p>The schema supported by a plugin is the list of detail definitions which are supported by the plugin. For in-depth information about the schema, please refer to the <a href="contactssync.html">Contacts Synchronous API</a>.</p>
<p>There are three different types of operation which are supported by the asynchronous API:</p>
<ul>
<li>Fetch detail definitions</li>
<li>Save detail definitions (create or update, if supported by the backend)</li>
<li>Remove detail definitions (if supported by the backend)</li>
</ul>
<p>These operations are supported via the the <a href="qcontactdetaildefinitionfetchrequest.html">QContactDetailDefinitionFetchRequest</a>, <a href="qcontactdetaildefinitionsaverequest.html">QContactDetailDefinitionSaveRequest</a> and <a href="qcontactdetaildefinitionremoverequest.html">QContactDetailDefinitionRemoveRequest</a> classes, respectively.</p>
<p>The synchronous API offered by the <a href="qcontactmanager.html">QContactManager</a> class to allow manipulation of the schema consists of the following functions:</p>
<ul>
<li>detailDefinitions(const QString&amp; contactType = QContactType::TypeContact) const</li>
<li>detailDefinition(const QString&amp; definitionName, const QString&amp; contactType = QContactType::TypeContact) const</li>
<li>saveDetailDefinition(const <a href="qcontactdetaildefinition.html">QContactDetailDefinition</a>&amp; def, const QString&amp; contactType = QContactType::TypeContact)</li>
<li>removeDetailDefinition(const QString&amp; definitionName, const QString&amp; contactType = QContactType::TypeContact)</li>
</ul>
<a name="examples-of-usage"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h2>Examples Of Usage</h2>
<a name="fetching-contacts"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h3>Fetching Contacts</h3>
<p>The client sets up a request for contacts matching a specific criteria from a particular manager.</p>
<p>Results from the request will be displayed to the user as they are received.</p>
<pre class="highlightedCode brush: cpp"> void RequestExample::performRequest()
 {
     <span class="comment">// retrieve any contact whose first name is &quot;Alice&quot;</span>
     QContactDetailFilter dfil;
     dfil.setDetailDefinitionName(QContactName::DefinitionName, QContactName::FieldFirstName);
     dfil.setValue(&quot;Alice&quot;);
     dfil.setMatchFlags(QContactFilter::MatchExactly);

     <span class="comment">// m_fetchRequest was created with m_fetchRequest = new QContactFetchRequest() in the ctor.</span>
     m_fetchRequest-&gt;setManager(this-&gt;m_manager); <span class="comment">// m_manager is a QContactManager*.</span>
     m_fetchRequest-&gt;setFilter(dfil);
     connect(m_fetchRequest, SIGNAL(resultsAvailable()), this, SLOT(printContacts()));
     connect(m_fetchRequest, SIGNAL(stateChanged(QContactAbstractRequest::State)),
             this, SLOT(stateChanged(QContactAbstractRequest::State)));
     if (!m_fetchRequest-&gt;start()) {
         qDebug() &lt;&lt; &quot;Unable to request contacts!&quot;;
         QCoreApplication::exit(0);
     } else {
         qDebug() &lt;&lt; &quot;Requested contacts; awaiting results...&quot;;
     }
 }

 void RequestExample::printContacts()
 {
     QList&lt;QContact&gt; results = m_fetchRequest-&gt;contacts();
     for (m_previousLastIndex = 0; m_previousLastIndex &lt; results.size(); ++m_previousLastIndex) {
         qDebug() &lt;&lt; &quot;Found an Alice:&quot; &lt;&lt; results.at(m_previousLastIndex).displayLabel();
     }
 }

 void RequestExample::stateChanged(QContactAbstractRequest::State state)
 {
     <span class="comment">// once we've finished retrieving results, stop processing events.</span>
     if (state == QContactAbstractRequest::FinishedState
         || state == QContactAbstractRequest::CanceledState) {
         qDebug() &lt;&lt; &quot;Finished displaying asynchronously retrieved contacts!&quot;;
         QCoreApplication::exit(0);
     }
 }</pre>
<a name="other-asynchronous-operations"></a><div class="navTop"><a href="#toc"><img src="./images/bullet_up.png"></a></div>
<h3>Other Asynchronous Operations</h3>
<p>All other asynchronous operations are performed in a similar manner to the previous example. A request of the desired type (which is derived from <a href="qcontactabstractrequest.html">QContactAbstractRequest</a>) is created, certain criteria are set which determine the intent of the request, and the signals of the request are connected to slots which deals with the results. The request can then be started.</p>
</div>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009-2010 Nokia Corporation and/or its subsidiary(-ies)</td>
<td width="20%" align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qt Mobility Project 1.1.0</div></td>
</tr></table></div></address>  <script src="scripts/functions.js" type="text/javascript"></script>
  <!-- <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-4457116-5']);
  _gaq.push(['_trackPageview']);
  (function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script> -->
</body>
</html>
